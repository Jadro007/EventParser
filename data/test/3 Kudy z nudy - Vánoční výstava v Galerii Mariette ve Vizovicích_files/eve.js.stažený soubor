(function(n){var s="0.5.0",o="hasOwnProperty",u=/[\.\/]/,h=/\s*,\s*/,c="*",p=function(){},l=function(n,t){return n-t},t,i,f={n:{}},a=function(){for(var n=0,t=this.length;n<t;n++)if(typeof this[n]!="undefined")return this[n]},v=function(){for(var n=this.length;--n;)if(typeof this[n]!="undefined")return this[n]},y=Object.prototype.toString,e=String,r=Array.isArray||function(n){return n instanceof Array||y.call(n)=="[object Array]"};eve=function(n,r){var d=f,b=i,y=Array.prototype.slice.call(arguments,2),s=eve.listeners(n),c=0,u,h=[],p={},o=[],k=t,e,w;for(o.firstDefined=a,o.lastDefined=v,t=n,i=0,e=0,w=s.length;e<w;e++)"zIndex"in s[e]&&(h.push(s[e].zIndex),s[e].zIndex<0&&(p[s[e].zIndex]=s[e]));for(h.sort(l);h[c]<0;)if(u=p[h[c++]],o.push(u.apply(r,y)),i)return i=b,o;for(e=0;e<w;e++)if(u=s[e],"zIndex"in u)if(u.zIndex==h[c]){if(o.push(u.apply(r,y)),i)break;do if(c++,u=p[h[c]],u&&o.push(u.apply(r,y)),i)break;while(u)}else p[u.zIndex]=u;else if(o.push(u.apply(r,y)),i)break;return i=b,t=k,o};eve._events=f;eve.listeners=function(n){for(var v=r(n)?n:n.split(u),t=f,i,y,s,o,w,h,l=[t],a=[],e=0,p=v.length;e<p;e++){for(h=[],o=0,w=l.length;o<w;o++)for(t=l[o].n,y=[t[v[e]],t[c]],s=2;s--;)i=y[s],i&&(h.push(i),a=a.concat(i.f||[]));l=h}return a};eve.separator=function(n){n?(n=e(n).replace(/(?=[\.\^\]\[\-])/g,"\\"),n="["+n+"]",u=new RegExp(n)):u=/[\.\/]/};eve.on=function(n,t){var o,i,s;if(typeof t!="function")return function(){};for(o=r(n)?r(n[0])?n:[n]:e(n).split(h),i=0,s=o.length;i<s;i++)(function(n){for(var s=r(n)?n:e(n).split(u),i=f,c,o=0,h=s.length;o<h;o++)i=i.n,i=i.hasOwnProperty(s[o])&&i[s[o]]||(i[s[o]]={n:{}});for(i.f=i.f||[],o=0,h=i.f.length;o<h;o++)if(i.f[o]==t){c=!0;break}c||i.f.push(t)})(o[i]);return function(n){+n==+n&&(t.zIndex=+n)}};eve.f=function(n){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[n,null].concat(t).concat([].slice.call(arguments,0)))}};eve.stop=function(){i=1};eve.nt=function(n){var i=r(t)?t.join("."):t;return n?new RegExp("(?:\\.|\\/|^)"+n+"(?:\\.|\\/|$)").test(i):i};eve.nts=function(){return r(t)?t:t.split(u)};eve.off=eve.unbind=function(n,t){var v,i,a,w,l,p,s,k,y,b;if(!n){eve._events=f={n:{}};return}if(v=r(n)?r(n[0])?n:[n]:e(n).split(h),v.length>1){for(l=0,p=v.length;l<p;l++)eve.off(v[l],t);return}for(v=r(n)?n:e(n).split(u),y=[f],l=0,p=v.length;l<p;l++)for(s=0;s<y.length;s+=w.length-2){if(w=[s,1],i=y[s].n,v[l]!=c)i[v[l]]&&w.push(i[v[l]]);else for(a in i)i[o](a)&&w.push(i[a]);y.splice.apply(y,w)}for(l=0,p=y.length;l<p;l++)for(i=y[l];i.n;){if(t){if(i.f){for(s=0,k=i.f.length;s<k;s++)if(i.f[s]==t){i.f.splice(s,1);break}i.f.length||delete i.f}for(a in i.n)if(i.n[o](a)&&i.n[a].f){for(b=i.n[a].f,s=0,k=b.length;s<k;s++)if(b[s]==t){b.splice(s,1);break}b.length||delete i.n[a].f}}else{delete i.f;for(a in i.n)i.n[o](a)&&i.n[a].f&&delete i.n[a].f}i=i.n}};eve.once=function(n,t){var i=function(){return eve.off(n,i),t.apply(this,arguments)};return eve.on(n,i)};eve.version=s;eve.toString=function(){return"You are running Eve "+s};typeof module!="undefined"&&module.exports?module.exports=eve:typeof define=="function"&&define.amd?define("eve",[],function(){return eve}):n.eve=eve})(this)